<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPCRF Part 2</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="ipcrf_highly_proficient_part2_css.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-logo">
            <img src="asset/image 6.png" alt="DepED Logo" />
        </div>
        <ul class="navbar-menu">
            <li><a href="teacher_home.html" class="nav-link"><img src="asset/House_01.png" alt="Home Icon" class="nav-icon"> Home</a></li>
            <li><a href="teacher_evaluation.html" class="nav-link"><img src="asset/Test Passed.png" alt="Evaluation Icon" class="nav-icon"> Evaluation</a></li>
            <li><a href="teacher_forms.html" class="nav-link forms active"><img src="asset/Documents1.png" alt="Forms Icon" class="nav-icon"> Forms</a></li>
            <li><a href="teacher_summary.html" class="nav-link"><img src="asset/Chart_Pie.png" alt="Summary Icon" class="nav-icon"> Summary</a></li>
            <li><a href="teacher_records.html" class="nav-link"><img src="asset/Folders1.png" alt="Records Icon" class="nav-icon"> Records</a></li>
            <li><a href="teacher_profile.html" class="nav-link"><img src="asset/User_01.png" alt="Profile Icon" class="nav-icon"> Profile</a></li>
            <li id="logoutLink" class="logout-btn">
                <a href="../../index.html">
                    <img src="asset/Log_Out.png" alt="Logout Icon" class="nav-icon"> Logout
                </a>
            </li>
        </ul>
    </nav>

    <h1>Core Behavioral Competencies</h1>

    <div class="custom-hr"></div>
    <p class="instructions"><strong>Instructions:</strong> Please tick the box of the competency indicators that you demonstrated during the performance cycle.</p> 

                         <!-- Rating Section after table -->
        <!-- First Objective Section -->
<div class="objective-container">
    <h2>SELF-MANAGEMENT</h2>
    <div class="ratings">
        <div class="rating-options">
            <div>
                <label>
                    <input type="checkbox" id="Obj1" name="obj1" class="checkbox-gap" value="1">
                    Sets personal goals and direction, needs, and development.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj1" name="obj1" class="checkbox-gap" value="2">
                    Undertakes personal actions and behavior that are clear and purposive and takes into account personal goals and values congruent to that of the organization. 
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj1" name="obj1" class="checkbox-gap" value="3">
                    Displays emotional maturity and enthusiasm for and is challenged by higher goals.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj1" name="obj1" class="checkbox-gap" value="4">
                    Prioritizes work tasks and schedules (through Gantt chants, checklists, etc.) to achieve goals.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj1" name="obj1" class="checkbox-gap" value="5">
                    Sets high quality, challenging, realistic goals for self and others. 
                </label>
            </div>
            <!-- Add other options for the first objective here -->
        </div>
    </div>
</div>

<!-- Second Objective Section -->
<div class="objective-container">
    <h2>PROFESSIONALISM AND ETHICS</h2>
    <div class="ratings">
        <div class="rating-options">
            <div>
                <label>
                    <input type="checkbox" id="Obj2" name="obj2" class="checkbox-gap" value="1">
                    Demonstrates the values and behavior enshrined in the Norms and Conduct and Ethical Standards for Public Officials and Employees (RA 6713).
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj2" name="obj2" class="checkbox-gap" value="2">
                    Practices ethical and professional behavior and conduct taking into account the impact of his/her actions and decisions.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj2" name="obj2" class="checkbox-gap" value="3">
                    Maintains a professional image: being trustworthy, regularity of attendance and punctuality, good grooming and communication.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj2" name="obj2" class="checkbox-gap" value="4">
                    Makes personal sacrifices to meet the organization's needs.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj2" name="obj2" class="checkbox-gap" value="5">
                    Acts with a sense of urgency and responsibility to meet the organization's needs, improve system and help others improve their effectiveness.
                </label>
            </div>
            <!-- Add other options for the second objective here -->
        </div>
    </div>
</div>

<!-- Third Objective Section -->
<div class="objective-container">
    <h2>RESULTS FOCUS</h2>
    <div class="ratings">
        <div class="rating-options">
            <div>
                <label>
                    <input type="checkbox" id="Obj3" name="obj3" class="checkbox-gap" value="1">
                    Achieves results with optimal use of time and resources most of the time.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj3" name="obj3" class="checkbox-gap" value="2">
                    Avoids rework, mistakes and wastage through effective work methods by placing organizational needs before personal needs.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj3" name="obj3" class="checkbox-gap" value="3">
                    Delivers error-free outputs most of the time by conforming to standard operating procedures correctly and consistently. Able to produce very satisfactory quality work in terms of usefulness/acceptability and completeness with no supervision required.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj3" name="obj3" class="checkbox-gap" value="4">
                    Expresses a desire to do better and may express frustration at waste or inefficiency. May focus on new or more precise ways of meeting goals set.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj3" name="obj3" class="checkbox-gap" value="5">
                    Makes specific changes in the system or in own work methods to improve performance. Examples may include doing something better, faster, at a lowest cost, more efficiently, or improving quality, customer satisfaction, morale, without setting any specific goal.
                </label>
            </div>
            <!-- Add other options for the second objective here -->
        </div>
    </div>
</div>

<!-- Fourth Objective Section -->
<div class="objective-container">
    <h2>TEAMWORK</h2>
    <div class="ratings">
        <div class="rating-options">
            <div>
                <label>
                    <input type="checkbox" id="Obj4" name="obj4" class="checkbox-gap" value="1">
                    Willingly does his/her share of responsibility.  
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj4" name="obj4" class="checkbox-gap" value="2">
                    Promotes collaboration and removes barrier to teamwork and goal accomplishment across the organization. 
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj4" name="obj4" class="checkbox-gap" value="3">
                    Applies negotiation principles in arriving at win-win agreements.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj4" name="obj4" class="checkbox-gap" value="4">
                    Drives consensus and team ownership of decisions.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj4" name="obj4" class="checkbox-gap" value="5">
                    Works constructively and collaboratively with others and across organizations to accomplish organization goals and objectives.
                </label>
            </div>
            <!-- Add other options for the second objective here -->
        </div>
    </div>
</div>

<!-- Fifth Objective Section -->
<div class="objective-container">
    <h2>SERVICE ORIENTATION</h2>
    <div class="ratings">
        <div class="rating-options">
            <div>
                <label>
                    <input type="checkbox" id="Obj5" name="obj5" class="checkbox-gap" value="1">
                    Can explain and articulate organizational directions, issues and problems. 
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj5" name="obj5" class="checkbox-gap" value="2">
                    Takes personal responsibility for dealing with and/or correcting customer service issues and concerns.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj5" name="obj5" class="checkbox-gap" value="3">
                    Initiates activities that promote advocacy for men and women empowerment.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj5" name="obj5" class="checkbox-gap" value="4">
                    Participates in updating office vision, mission, mandates and strategies based on DepEd strategies and directions.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj5" name="obj5" class="checkbox-gap" value="5">
                    Develops and adopts service improvement program through simplified procedures that will further enhance service delivery.
                </label>
            </div>
            <!-- Add other options for the second objective here -->
        </div>
    </div>
</div>

<!-- Sixth Objective Section -->
<div class="objective-container">
    <h2>INNOVATION</h2>
    <div class="ratings">
        <div class="rating-options">
            <div>
                <label>
                    <input type="checkbox" id="Obj6" name="obj6" class="checkbox-gap" value="1">
                    Examines the root cause of problems and suggests effective solutions. Foster new ideas, processes and suggests better ways to do things (cost and for operational efficiency).
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj6" name="obj6" class="checkbox-gap" value="2">
                    Demonstrates an ability to think "beyond the box". Continuously focuses on improving personal productivity to create higher value and results.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj6" name="obj6" class="checkbox-gap" value="3">
                    Promotes a creative climate and inspires co-workers to develop original ideas or solutions.
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj6" name="obj6" class="checkbox-gap" value="4">
                    Translates creative thinking into tangible changes and solutions that improve the work unit and organization..
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="Obj6" name="obj6" class="checkbox-gap" value="5">
                    Uses ingenious methods to accomplish responsibilities. Demonstrates resourcefulness and the ability to succeed with minimal resources.
                </label>
            </div>
            <!-- Add other options for the second objective here -->
        </div>
    </div>
</div>

        
                                

<!-- Back and Proceed buttons -->
<div class="buttons-container">
    <a href="ipcrf_highly_proficient_part1.html" class="back-btn">Back</a>
    <button class="proceed-btn"  onclick="updateIPCRF2()"> Save </a>
</div>


    </div>
    <!-- Logout Confirmation Modal -->
    <div id="logoutModal" class="modal hidden"> <!-- Added 'hidden' class to hide by default -->
        <div class="modal-content">
            <p>Are you sure you want to logout?</p>
            <div class="modal-buttons">
                <button class="yes-btn">Yes</button>
                <button class="no-btn">No</button>
            </div>
        </div>
    </div>

    <script>
        // Self-Management Section 
        let selfManagementSelected = [];
        const selfManagementCheckboxes = document.querySelectorAll('input[name="obj1"]');

        // Professionalism and Ethics Section 
        let professionalismSelected = [];
        const professionalismCheckboxes = document.querySelectorAll('input[name="obj2"]');

        // Results Focus Section 
        let resultsFocusSelected = [];
        const resultsFocusCheckboxes = document.querySelectorAll('input[name="obj3"]');

        // Teamwork Section 
        let teamworkSelected = [];
        const teamworkCheckboxes = document.querySelectorAll('input[name="obj4"]');

        // Service Orientation Section 
        let serviceOrientationSelected = [];
        const serviceOrientationCheckboxes = document.querySelectorAll('input[name="obj5"]');

        // Innovation Section 
        let innovationSelected = [];
        const innovationCheckboxes = document.querySelectorAll('input[name="obj6"]');

        // To access each checkbox within each section, you can loop over the NodeList:
        selfManagementCheckboxes.forEach((checkbox) => {
            console.log(checkbox.value, checkbox.checked); // Example: Get the id and check status of each checkbox
            if (checkbox.checked) {
                if (!selfManagementSelected.includes(checkbox.value)) {
                    selfManagementSelected.push(checkbox.value);
                }
            } else {
                const index = selfManagementSelected.indexOf(checkbox.value);
                if (index > -1) {
                    selfManagementSelected.splice(index, 1);
                }
            }
        });

        professionalismCheckboxes.forEach((checkbox) => {
            console.log(checkbox.id, checkbox.checked);
            if (checkbox.checked) {
                if (!professionalismSelected.includes(checkbox.value)) {
                    professionalismSelected.push(checkbox.value);
                }
            } else {
                const index = professionalismSelected.indexOf(checkbox.value);
                if (index > -1) {
                    professionalismSelected.splice(index, 1);
                }
            }
            
        });

        resultsFocusCheckboxes.forEach((checkbox) => {
            console.log(checkbox.id, checkbox.checked);
            if (checkbox.checked) {
                if (!resultsFocusSelected.includes(checkbox.value)) {
                    resultsFocusSelected.push(checkbox.value);
                }
            } else {
                const index = resultsFocusSelected.indexOf(checkbox.value);
                if (index > -1) {
                    resultsFocusSelected.splice(index, 1);
                }
            }
        });

        teamworkCheckboxes.forEach((checkbox) => {
            console.log(checkbox.id, checkbox.checked);
            if (checkbox.checked) {
                if (!teamworkSelected.includes(checkbox.value)) {
                    teamworkSelected.push(checkbox.value);
                }
            } else {
                const index = teamworkSelected.indexOf(checkbox.value);
                if (index > -1) {
                    teamworkSelected.splice(index, 1);
                }
            }
        });
        
        serviceOrientationCheckboxes.forEach((checkbox) => {
            console.log(checkbox.id, checkbox.checked);
            if (checkbox.checked) {
                if (!serviceOrientationSelected.includes(checkbox.value)) {
                    serviceOrientationSelected.push(checkbox.value);
                }
            } else {
                const index = serviceOrientationSelected.indexOf(checkbox.value);
                if (index > -1) {
                    serviceOrientationSelected.splice(index, 1);
                }
            }
        });

        innovationCheckboxes.forEach((checkbox) => {
            console.log(checkbox.id, checkbox.checked);
            if (checkbox.checked) {
                if (!innovationSelected.includes(checkbox.value)) {
                    innovationSelected.push(checkbox.value);
                }
            } else {
                const index = innovationSelected.indexOf(checkbox.value);
                if (index > -1) {
                    innovationSelected.splice(index, 1);
                }
            }
        });

        // Repeat for other sections as needed...


    
    
    // Modal logic
        const logoutButton = document.getElementById('logoutLink');  // Logout button
        const logoutModal = document.getElementById('logoutModal');
        const yesButton = document.querySelector('.yes-btn');
        const noButton = document.querySelector('.no-btn');
        
        // Show modal when logout is clicked
        logoutButton.addEventListener('click', function(event) {
            event.preventDefault();  // Prevent default logout behavior
            logoutModal.classList.remove('hidden');  // Show modal by removing 'hidden' class
        });
        
        // Hide modal when "No" is clicked
        noButton.addEventListener('click', function() {
            logoutModal.classList.add('hidden');  // Hide modal by adding 'hidden' class
        });
        
        // Redirect when "Yes" is clicked
        yesButton.addEventListener('click', async function() {
            try {
                
                const response = await fetch('https://bnahs.pythonanywhere.com/api/user/logout/', {
                    method: 'POST',
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest',
                        
                    },
                    credentials: 'include',
                });

                const data = await response.json();
                if (response.ok) {
                    console.log("Success Data : ", data); 
                    window.location.href = '../../get-started.html'; 
                } else {
                    console.log("Error Data : ", data);
                }
            } catch (error) {
                console.error("Error during fetch:", error);
            }
        });


        // Function to get values of selected checkboxes
function getSelectedCheckboxValues(element) {
    const selectedValues = [];
    element.forEach(checkbox => {
        if (checkbox.checked) {
            selectedValues.push(checkbox.value);
        }
    });
    return selectedValues;
}


function checkTheBoxValues(element , value) {
    element.forEach(checkbox => {
        if (checkbox.value == value) {
            checkbox.checked = true;
        }
    });
}

setInterval(function() {
    employee_id && localStorage.setItem(employee_id + 'self_management_selected', JSON.stringify(getSelectedCheckboxValues(selfManagementCheckboxes)));
    employee_id && localStorage.setItem(employee_id + 'professional_ethics_selected', JSON.stringify(getSelectedCheckboxValues(professionalismCheckboxes)));
    employee_id && localStorage.setItem(employee_id + 'results_focus_selected', JSON.stringify(getSelectedCheckboxValues(resultsFocusCheckboxes)));
    employee_id && localStorage.setItem(employee_id + 'teamwork_selected', JSON.stringify(getSelectedCheckboxValues(teamworkCheckboxes)));
    employee_id && localStorage.setItem(employee_id + 'service_orientation_selected', JSON.stringify(getSelectedCheckboxValues(serviceOrientationCheckboxes)));
    employee_id && localStorage.setItem(employee_id + 'innovation_selected', JSON.stringify(getSelectedCheckboxValues(innovationCheckboxes)));
}, 100);

let self_management_selected = [];
let professional_ethics_selected = [];
let results_focus_selected = [];
let teamwork_selected = [];
let service_orientation_selected = [];
let innovation_selected = [];

let ipcrf_content = undefined;

let employee_id = null;

async function getIPCRF(){
    const formData = new FormData();
    // formData.append('employee_id', employeeId); 
    // formData.append('password', password); 

    try {
        const response = await fetch('https://bnahs.pythonanywhere.com/api/teacher/school/get/ipcrf/part2/', {
            method: 'GET',
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
            },
            credentials: 'include',
            // body: formData,
        });

        ipcrf_content = await response.json();
        if (response.ok) {
            console.log("Success Data : ", ipcrf_content);  
            employee_id = ipcrf_content.ipcrf.employee_id;

            employee_id && autofill()
        } else {
            window.location.href = '../../get-started.html'; 
            console.log("Error Data : ", ipcrf_content);
            // alert("Login Failed.")
        }
    } catch (error) {
        console.error("Error during fetch:", error);
    }
}


getIPCRF();

async function updateIPCRF2(){
    const formData = new FormData();
    // formData.append('employee_id', employeeId); 
    // formData.append('password', password); 

    try {
        let content = ipcrf_content['ipcrf']['content_for_teacher'];
        content['1']["Selected"] = selfManagementSelected;
        content['2']["Selected"] = professionalismSelected;
        content['3']["Selected"] = resultsFocusSelected;
        content['4']["Selected"] = teamworkSelected;
        content['5']["Selected"] = serviceOrientationSelected;
        content['6']["Selected"] = innovationSelected;
        formData.append('ipcrf_id', ipcrf_content['ipcrf']['connection_to_other']); // TODO: Get from IPCRF
        formData.append('content', JSON.stringify(content) );
        const response = await fetch('https://bnahs.pythonanywhere.com/api/teacher/school/update/ipcrf/part2/', {
            method: 'POST',
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
            },  
            credentials: 'include',
            body: formData,
        });

        const data = await response.json();
        if (response.ok) {
            console.log("Success Data : ", data);  
            alert("Form submitted successfully!");
            setTimeout(() => {
                location.href = 'teacher_choices_hp.html';
            }, 2000);
        } else {
            console.log("Error Data : ", data);
            
            // alert("Login Failed.")
        }
    } catch (error) {
        console.error("Error during fetch:", error);
    }
}



function autofill(){
    self_management_selected = JSON.parse(localStorage.getItem(employee_id + 'self_management_selected'));
    professional_ethics_selected = JSON.parse(localStorage.getItem(employee_id + 'professional_ethics_selected'));
    results_focus_selected = JSON.parse(localStorage.getItem(employee_id + 'results_focus_selected'));
    teamwork_selected = JSON.parse(localStorage.getItem(employee_id + 'teamwork_selected'));
    service_orientation_selected = JSON.parse(localStorage.getItem(employee_id + 'service_orientation_selected'));
    innovation_selected = JSON.parse(localStorage.getItem(employee_id + 'innovation_selected'));

    console.log(self_management_selected)
    if(self_management_selected){
        self_management_selected.forEach(item => {
            checkTheBoxValues(selfManagementCheckboxes, item);
        });
    }

    if(professional_ethics_selected){
        professional_ethics_selected.forEach(item => {
            checkTheBoxValues(professionalismCheckboxes, item);
        });
    }
    
    if(results_focus_selected){
        results_focus_selected.forEach(item => {
            checkTheBoxValues(resultsFocusCheckboxes, item);
        }); 
    }

    if(teamwork_selected){
        teamwork_selected.forEach(item => {
            checkTheBoxValues(teamworkCheckboxes, item);
        });
    }

    if(service_orientation_selected){
        service_orientation_selected.forEach(item => {
            checkTheBoxValues(serviceOrientationCheckboxes, item);
        });
    }

    if(innovation_selected){
        innovation_selected.forEach(item => {   
            checkTheBoxValues(innovationCheckboxes, item);
        });
    }
}




        </script>

</body>
</html>