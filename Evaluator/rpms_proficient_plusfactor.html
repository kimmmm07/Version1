<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPMS Proficient Plus Factor</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="rpms_proficient_kra.css">
</head>
<body>
    <!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <div class="sidebar-icon" id="menu-icon">
        <a href="#"><img src="Menu.png" alt="Menu Icon" id="menu-icon-img" /></a>
    </div>        
    <div class="sidebar-icon" id="home-icon">
        <a href="rpms_proficient_homepage.html"><img src="Home.png" alt="Home Icon" id="home-icon-img" /></a>
    </div>
    <div class="sidebar-icon" id="settings-icon">
        <a href="rpms_setting.html"><img src="Settings.png" alt="Settings Icon" id="settings-icon-img" /></a>
    </div>
</div>

<!-- Floating Menu -->
<div class="floating-menu" id="floating-menu">
    <div class="menu-header" id="menu-header">
        <!-- Close button -->
        <button class="close-btn" id="close-btn" onclick="closeMenu()">✖</button>
    </div>
    <ul id="floating-menu-list">
        <li><a href="rpms_proficient_homepage.html" id="home-link"><img src="Home.png" alt="Home Icon" id="home-link-img"/> Home</a></li>
        <li><a href="rpms_setting.html" id="settings-link"><img src="Settings.png" alt="Settings Icon" id="settings-link-img"/> Setting</a></li>
        <hr class="menu-divider" id="menu-divider">
        <li><a href="rpms_proficient_stream.html" id="school-year-link"><span class="sy-circle" id="sy-circle">SY</span> School Year 2023–2024</a></li>
    </ul>
</div>

<!-- Header -->
<header id="header">
    <div id="deped-logo-container">
        <img src="DepEd_01.png" alt="DepED Logo" id="deped-logo">
    </div>
    <nav id="main-nav">
        <a href="evaluator_dashboard.html" id="home-nav-link"><img src="House_01.png" alt="Home" id="home-nav-icon">Home</a>
        <a href="proficient_form.html" class="active" id="forms-nav-link"><img src="Documents.png" alt="Forms" id="forms-nav-icon">Forms</a>
        <a href="rpms_proficient_records.html" id="records-nav-link"><img src="Folders.png" alt="Records" id="records-nav-icon">Records</a>
        <a href="evaluator_summary.html" id="summary-nav-link"><img src="Chart_Pie.png" alt="Summary" id="summary-nav-icon">Summary</a>
        <a href="evaluator_profile.html" id="profile-nav-link"><img src="User_01.png" alt="Profile" id="profile-nav-icon"> Evaluator's Profile</a>
        <a href="#" id="logoutLink" style="color: #d00000; font-weight: bold;"><img src="Log_Out.png" alt="Logout" id="logout-icon">Logout</a>
    </nav>
</header>

<!-- Container -->
<div class="container" id="container">
    <div class="breadcrumb" id="breadcrumb">
        <a href="rpms_proficient_stream.html" class="back-link"><span><b>← Results-Based Performance Management System (RPMS)</b></span></a>
    </div>

    <br>
    <div class="tabs" id="tabs">
        <a href="rpms_proficient_plusfactor.html" class="tab active" id="instructions-tab">Instructions</a>
        <a href="rpms_proficient_tw_plusfactor.html" class="tab" id="teacher-work-tab">Teacher work</a>
        <a href="rpms_proficient_plusfactor_grades.html" class="tab">Grades</a>
    </div>

    <br>
    <div class="kra-header" id="kra-header">
        <div class="kra-icon" id="kra-icon">
            <img src="Clipboard.png" alt="Clipboard Icon" id="kra-icon-img">
        </div>
        <div class="kra-details" id="kra-details">
            <h2 id="kra-title">PLUS FACTOR</h2>
            <!-- <p class="posted-by" id="posted-by">John Doe • 6:01PM</p> -->
            <p class="points" id="points">2 points</p>
        </div>
        <!--<div class="dots-menu" id="dots-menu">
            <span id="dots-span">...</span>
        </div>-->
    </div>

    <div class="kra-content" id="kra-content">
        <div class="objective" id="kraObjective15">
            <p><strong>7% | Objective 15</strong> (Performed various related works / activities that contribute to the teaching-learning process.)</p>
            <ul id="Objective15">
                <li><strong>Means of Verification (MOV)</strong></li>
                <li>Any one (1) of the following:
                    <br> 1. committee involvement;
                    <br> 2. involvement as module/learning material writer/ validator;
                    <br> 3. involvement as a resource person/speaker/learning facilitator in the RO/SDO/school-initiated TV/radio-based instruction;
                    <br> 4. book or journal authorship/co-authorship/ contributorship;
                    <br> 5. advisorship/coordinatorship/chairpersonship
                    <br> 6. participation in demonstration teaching;
                    <br> 7. participation as research presenter in a forum/ conference;
                    <br> 8. mentorship of pre-service/in-service teachers
                    <br> 9. conducted research within the rating period;
                    <br> 10. Others (please specify) with annotation on how it contributed to the teaching-learning process.</li>
            </ul>
        </div>
    </div>

    <!--<div class="comments-section" id="comments-section">
        <h4 id="comments-heading">Comments</h4>
        <div class="add-comment" id="add-comment">
            <input type="text" placeholder="Add comments" id="comment-input" />
            <button type="submit" id="send-comment-btn"><img src="Paper_Plane.png" alt="Send Icon" id="send-icon"></button>
        </div>
    </div>-->
</div>


    <!-- Logout Confirmation Modal -->
    <div id="logoutModal" class="modal hidden"> <!-- Added 'hidden' class to hide by default -->
        <div class="modal-content">
            <p>Are you sure you want to logout?</p>
            <div class="modal-buttons">
                <button class="yes-btn">Yes</button>
                <button class="no-btn">No</button>
            </div>
        </div>
    </div>

    <script>
        

const class_work_id = sessionStorage.getItem('plus_factor_id');

const teacher_id = sessionStorage.getItem('teacher_id');

let teacher_name = undefined;


const objective15Score = document.getElementById("objective15Score");
const plusfactortotalScore = document.getElementById("plusfactortotalScore");


let teacher = undefined;
let submitted = undefined;
 

async function getTeacherAttachments() {
    try {

        const formData = new FormData();
        formData.append('class_work_id ', class_work_id);
        formData.append('teacher_id', teacher_id);


        const response = await fetch('https://bnahs.pythonanywhere.com/api/evaluator/school/get/rpms/folder/classwork/attachments/', {
            method: 'POST',
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                
            },
            credentials: 'include',
            body: formData,
        });

        const data = await response.json();
        if (response.ok) {
            
            teacher = data.teacher;
            submitted = data.submitted?.[0];
            
            
            

            if (submitted?.file_is_checked){
                objective15Score.innerHTML = `<span id="objective15">${submitted.grade['15']['Score']}/2</span>`;
            }

            if (submitted?.is_checked){
                plusfactortotalScore.innerHTML = `<span id="objective15">${submitted.grade['15']['Score']}/2</span>`; 
            }

        } else {
            
        }
    } catch (error) {
        console.error("Error during fetch:", error);
    }
}

getTeacherAttachments();




    </script>
</body>
</html>
