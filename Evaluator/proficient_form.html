<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proficient Evaluation Forms</title>
    <link rel="stylesheet" href="proficient_form.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
</head> 
<body>

<header>
    <div>
        <img src="DepEd_01.png" alt="DepED Logo">
    </div>
    <nav>
        <a href="evaluator_dashboard.html"><img src="House_01.png" alt="Home">Home</a>
        <a href="proficient_form.html" class="active"><img src="Documents.png" alt="Forms">Forms</a>
        <a href="cot_proficient_records.html"><img src="Folders.png" alt="Records">Records</a>
        <a href="evaluator_summary.html"><img src="Chart_Pie.png" alt="Summary">Summary</a>
        <a href="evaluator_profile.html"><img src="User_01.png" alt="Profile">Profile</a>
        <a href="#" id="logoutLink" style="color: #d00000; font-weight: bold;"><img src="Log_Out.png" alt="Logout">Logout</a>
    </nav>
</header>

<div class="container">
    <h1 id="evaluation-title">Choose form for your evaluation</h1>

    <div class="divider"></div>

    <select id="formType" onchange="navigateToLink()">
        <!-- <option value="#">Select Form</option> -->
        <option value="proficient_form.html">Proficient Teacher</option>
        <!-- <option value="highlyproficient_form.html">Highly Proficient Teacher</option> -->
    </select>

    <div class="section-title" id="section-title-cot">Classroom Observation Tools</div>
    
    <a href="cot_t1-3.html" style="text-decoration: none;">
        <div class="form-card" id="form-card-proficient">
            <div>
                <h3><img class="form-icon" src="File_Document.png" alt="Icon" id="form-icon-proficient">Rating Sheet for Proficient Teacher</h3>
            </div>
            <div class="form-details" id="form-details-proficient">
                <div id="reviews-proficient">
                    <span id="conducted-reviews-proficient">0</span>
                    <p>Conducted Reviews</p>
                </div>
                <div id="fully-responded-reviews-proficient">
                    <span id="full-response-count-proficient">0</span>
                    <p>Fully responded reviews</p>
                </div>
                <div id="attention-needed-proficient">
                    <span id="attention-count-proficient">0</span>
                    <p>Needs attention</p>
                </div>
                <div class="response-rate" id="response-rate-proficient">
                    <span id="response-percentage-proficient">0%</span>
                    <p>Response rate</p>
                </div>
            </div>
        </div>
    </a>

    <div class="form-card disabled" id="form-card-highlyproficient">
        <div>
            <h3><img class="form-icon" src="File_Document.png" alt="Icon" id="form-icon-highlyproficient">Rating Sheet for Highly Proficient Teacher</h3>
        </div>
        <div class="form-details" id="form-details-highlyproficient">
            <div id="reviews-highlyproficient">
                <span id="conducted-reviews-highlyproficient">0</span>
                <p>Conducted Reviews</p>
            </div>
            <div id="fully-responded-reviews-highlyproficient">
                <span id="full-response-count-highlyproficient">0</span>
                <p>Fully responded reviews</p>
            </div>
            <div id="attention-needed-highlyproficient">
                <span id="attention-count-highlyproficient">0</span>
                <p>Needs attention</p>
            </div>
            <div class="response-rate" id="response-rate-highlyproficient">
                <span id="response-percentage-highlyproficient">0%</span>
                <p>Response rate</p>
            </div>
        </div>
    </div>

    <div class="section-title" id="section-title-ipcrf">Individual Performance Commitment and Review Form</div>
    
    <a href="ipcrf_t1-3.html" style="text-decoration: none;">
        <div class="form-card" id="form-card-ipcrf-proficient">
            <div>
                <h3><img class="form-icon" src="Table.png" alt="Icon" id="form-icon-ipcrf-proficient">IPCRF for Rating Sheet for Proficient Teacher</h3>
            </div>
            <div class="form-details" id="form-details-ipcrf-proficient">
                <div id="reviews-ipcrf-proficient">
                    <span id="conducted-reviews-ipcrf-proficient">0</span>
                    <p>Conducted Reviews</p>
                </div>
                <div id="fully-responded-reviews-ipcrf-proficient">
                    <span id="full-response-count-ipcrf-proficient">0</span>
                    <p>Fully responded reviews</p>
                </div>
                <div id="attention-needed-ipcrf-proficient">
                    <span id="attention-count-ipcrf-proficient">0</span>
                    <p>Needs attention</p>
                </div>
                <div class="response-rate" id="response-rate-ipcrf-proficient">
                    <span id="response-percentage-ipcrf-proficient">0%</span>
                    <p>Response rate</p>
                </div>
            </div>
        </div>
    </a>

    <div class="form-card disabled" id="form-card-ipcrf-highlyproficient">
        <div>
            <h3><img class="form-icon" src="Table.png" alt="Icon" id="form-icon-ipcrf-highlyproficient">IPCRF for Highly Proficient Teacher</h3>
        </div>
        <div class="form-details" id="form-details-ipcrf-highlyproficient">
            <div id="reviews-ipcrf-highlyproficient">
                <span id="conducted-reviews-ipcrf-highlyproficient">0</span>
                <p>Conducted Reviews</p>
            </div>
            <div id="fully-responded-reviews-ipcrf-highlyproficient">
                <span id="full-response-count-ipcrf-highlyproficient">0</span>
                <p>Fully responded reviews</p>
            </div>
            <div id="attention-needed-ipcrf-highlyproficient">
                <span id="attention-count-ipcrf-highlyproficient">0</span>
                <p>Needs attention</p>
            </div>
            <div class="response-rate" id="response-rate-ipcrf-highlyproficient">
                <span id="response-percentage-ipcrf-highlyproficient">0%</span>
                <p>Response rate</p>
            </div>
        </div>
    </div>

    <div class="section-title" id="section-title-rpms">Results-Based Performance Management System</div>
    
    <a href="rpms_t1-3.html" style="text-decoration: none;">
        <div class="form-card" id="form-card-rpms-proficient">
            <div>
                <h3><img class="form-icon" src="Folder_Open.png" alt="Icon" id="form-icon-rpms-proficient">RPMS for Proficient Teacher</h3>
            </div>
            <div class="form-details" id="form-details-rpms-proficient">
                <div id="reviews-rpms-proficient">
                    <span id="conducted-reviews-rpms-proficient">0</span>
                    <p>Conducted Reviews</p>
                </div>
                <div id="fully-responded-reviews-rpms-proficient">
                    <span id="full-response-count-rpms-proficient">0</span>
                    <p>Fully responded reviews</p>
                </div>
                <div id="attention-needed-rpms-proficient">
                    <span id="attention-count-rpms-proficient">0</span>
                    <p>Needs attention</p>
                </div>
                <div class="response-rate" id="response-rate-rpms-proficient">
                    <span id="response-percentage-rpms-proficient">0%</span>
                    <p>Response rate</p>
                </div>
            </div>
        </div>
    </a>

    <div class="form-card disabled" id="form-card-rpms-highlyproficient">
        <div>
            <h3><img class="form-icon" src="Folder_Open.png" alt="Icon" id="form-icon-rpms-highlyproficient">RPMS for Highly Proficient Teacher</h3>
        </div>
        <div class="form-details" id="form-details-rpms-highlyproficient">
            <div id="reviews-rpms-highlyproficient">
                <span id="conducted-reviews-rpms-highlyproficient">0</span>
                <p>Conducted Reviews</p>
            </div>
            <div id="fully-responded-reviews-rpms-highlyproficient">
                <span id="full-response-count-rpms-highlyproficient">0</span>
                <p>Fully responded reviews</p>
            </div>
            <div id="attention-needed-rpms-highlyproficient">
                <span id="attention-count-rpms-highlyproficient">0</span>
                <p>Needs attention</p>
            </div>
            <div class="response-rate" id="response-rate-rpms-highlyproficient">
                <span id="response-percentage-rpms-highlyproficient">0%</span>
                <p>Response rate</p>
            </div>
        </div>
    </div>
</div>



<!-- Logout Confirmation Modal -->
<div id="logoutModal" class="modal hidden"> <!-- Added 'hidden' class to hide by default -->
    <div class="modal-content">
        <p>Are you sure you want to logout?</p>
        <div class="modal-buttons">
            <button class="yes-btn">Yes</button>
            <button class="no-btn">No</button>
        </div>
    </div>
</div>


<script>




async function fixRedirections(){
    try{

        const response = await fetch('https://bnahs.pythonanywhere.com/api/evaluator/profile/', {
            method: 'GET',
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                
            },
            credentials: 'include',
        });

        const data = await response.json();
        if (response.ok) {
            console.log("Success Data : ", data);
            if (!data.evaluator.is_proficient){
                window.location.href = 'highlyproficient_form.html';
            } 
            //window.location.href = '../../get-started.html'; 
        } else {
            console.log("Error Data : ", data);
        }
    }catch(error){
        console.log(error);
    }
}

fixRedirections();





const conductedReviewsProficient = document.getElementById('conducted-reviews-proficient');
const fullResponseCountProficient = document.getElementById('full-response-count-proficient');
const attentionCountProficient = document.getElementById('attention-count-proficient');
const responsePercentageProficient = document.getElementById('response-percentage-proficient');

const conductedReviewsHighlyProficient = document.getElementById('conducted-reviews-highlyproficient');
const fullResponseCountHighlyProficient = document.getElementById('full-response-count-highlyproficient');
const attentionCountHighlyProficient = document.getElementById('attention-count-highlyproficient');
const responsePercentageHighlyProficient = document.getElementById('response-percentage-highlyproficient');

const conductedReviewsIpcrfProficient = document.getElementById('conducted-reviews-ipcrf-proficient');
const fullResponseCountIpcrfProficient = document.getElementById('full-response-count-ipcrf-proficient');
const attentionCountIpcrfProficient = document.getElementById('attention-count-ipcrf-proficient');
const responsePercentageIpcrfProficient = document.getElementById('response-percentage-ipcrf-proficient');

const conductedReviewsIpcrfHighlyProficient = document.getElementById('conducted-reviews-ipcrf-highlyproficient');
const fullResponseCountIpcrfHighlyProficient = document.getElementById('full-response-count-ipcrf-highlyproficient');
const attentionCountIpcrfHighlyProficient = document.getElementById('attention-count-ipcrf-highlyproficient');
const responsePercentageIpcrfHighlyProficient = document.getElementById('response-percentage-ipcrf-highlyproficient');

const conductedReviewsRpmsProficient = document.getElementById('conducted-reviews-rpms-proficient');
const fullResponseCountRpmsProficient = document.getElementById('full-response-count-rpms-proficient');
const attentionCountRpmsProficient = document.getElementById('attention-count-rpms-proficient');
const responsePercentageRpmsProficient = document.getElementById('response-percentage-rpms-proficient');

const conductedReviewsRpmsHighlyProficient = document.getElementById('conducted-reviews-rpms-highlyproficient');
const fullResponseCountRpmsHighlyProficient = document.getElementById('full-response-count-rpms-highlyproficient');
const attentionCountRpmsHighlyProficient = document.getElementById('attention-count-rpms-highlyproficient');
const responsePercentageRpmsHighlyProficient = document.getElementById('response-percentage-rpms-highlyproficient');

async function getFORMS(){ 

    

    try {
        const response = await fetch('https://bnahs.pythonanywhere.com/api/evaluator/forms/', {
            method: 'GET',
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
            },
            credentials: 'include', 
        });

        ipcrf_content = await response.json();
        if (response.ok) {
            console.log("Success Data : ", ipcrf_content);

            conductedReviewsProficient.textContent = ipcrf_content.number_of_conducted_cot_proficient;
            fullResponseCountProficient.textContent = ipcrf_content.number_of_evaluated_cot_proficient;
            attentionCountProficient.textContent = ipcrf_content.number_of_pending_cot_proficient;
            responsePercentageProficient.textContent = ipcrf_content.response_rate_of_cot_proficient.toFixed(2) + '%';

            conductedReviewsHighlyProficient.textContent = ipcrf_content.number_of_conducted_cot_highly_proficient;
            fullResponseCountHighlyProficient.textContent = ipcrf_content.number_of_evaluated_cot_highly_proficient;
            attentionCountHighlyProficient.textContent = ipcrf_content.number_of_pending_cot_highly_proficient;
            responsePercentageHighlyProficient.textContent = ipcrf_content.response_rate_of_cot_highly_proficient.toFixed(2) + '%';
            

            conductedReviewsIpcrfProficient.textContent = ipcrf_content.number_of_conducted_ipcrf_1_proficient;
            fullResponseCountIpcrfProficient.textContent = ipcrf_content.number_of_conducted_ipcrf_1_proficient;
            attentionCountIpcrfProficient.textContent = ipcrf_content.number_of_pending_ipcrf_1_proficient;
            responsePercentageIpcrfProficient.textContent = ipcrf_content.response_rate_of_ipcrf_1_proficient.toFixed(2) + '%';

            conductedReviewsIpcrfHighlyProficient.textContent = ipcrf_content.number_of_conducted_ipcrf_1_highly_proficient;
            fullResponseCountIpcrfHighlyProficient.textContent = ipcrf_content.number_of_conducted_ipcrf_1_highly_proficient;
            attentionCountIpcrfHighlyProficient.textContent = ipcrf_content.number_of_pending_ipcrf_1_highly_proficient;
            responsePercentageIpcrfHighlyProficient.textContent = ipcrf_content.response_rate_of_ipcrf_1_highly_proficient.toFixed(2) + '%';


            conductedReviewsRpmsProficient.textContent = ipcrf_content.number_of_conducted_rpms_proficient;
            fullResponseCountRpmsProficient.textContent = ipcrf_content.number_of_evaluated_rpms_proficient;
            attentionCountRpmsProficient.textContent = ipcrf_content.number_of_pending_rpms_proficient;
            responsePercentageRpmsProficient.textContent = ipcrf_content.response_rate_of_rpms_proficient.toFixed(2) + "%";

            conductedReviewsRpmsHighlyProficient.textContent = ipcrf_content.number_of_conducted_rpms_highly_proficient;
            fullResponseCountRpmsHighlyProficient.textContent = ipcrf_content.number_of_evaluated_rpms_highly_proficient;
            attentionCountRpmsHighlyProficient.textContent = ipcrf_content.number_of_pending_rpms_highly_proficient;
            responsePercentageRpmsHighlyProficient.textContent = ipcrf_content.response_rate_of_rpms_highly_proficient.toFixed(2) + "%";


        } else {
            console.log("Error Data : ", ipcrf_content);
            // alert("Login Failed.")
        }
    } catch (error) {
        console.error("Error during fetch:", error);
    }
}


getFORMS();


</script>

<script src="proficient_form.js"></script>

</body>
</html>
